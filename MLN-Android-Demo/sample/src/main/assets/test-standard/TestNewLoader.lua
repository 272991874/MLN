---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by XiongFangyu.
--- DateTime: 2018/7/26 下午7:14
---

local baseView = View()
baseView:width(100)
baseView:height(100)
baseView:x(10)
baseView:y(10)
baseView:bgColor(Color(255, 0, 0, 1))
baseView:cornerRadius(10)
baseView:borderWidth(10)
baseView:borderColor(Color(0, 255, 0, 1))
baseView:onClick(function ()
    print('click')
end)
window:addView(baseView)

screen_w = window:width()
screen_h = window:height()

local label = Label()
label:width(50)
label:height(50)
label:bgColor(Color(0,0,255,0.2))
label:cornerRadius(8)
local s = StyleString('aaa')
s:underline(1)
s:fontColor(Color(0,0,0,1))
print(s:calculateSize(100))
label:styleText(s)
label:textColor(Color(255,255,255,1))
label:textAlign(TextAlign.CENTER)
baseView:addView(label)

textlable = Label()
textlable:text('haha')
textlable:x(120)
textlable:y(10)
textlable:width(20)
textlable:lines(0)
textlable:height(20)
textlable:bgColor(Color(255,0,0,0.1))
window:addView(textlable)

switch = Switch():x(screen_w - 80):y(10):width(50):height(40)
switch:on(true)
switch:setSwitchChangedCallback(function(isOn)
    Toast("isOn: " .. tostring(isOn), 1)
end)
window:addView(switch)

local edit = EditTextView()
edit:width(100)
edit:height(50)
edit:y(50)
edit:placeholder('hint')
--edit:passwordMode(true)
edit:inputMode(EditTextViewInputMode.Normal)
edit:returnMode(ReturnType.Done)
edit:setReturnCallback(function ()
    local t = edit:text()
    local ss = StyleString('ic_launcher'):showAsImage(Size(16, 16)):append(StyleString(' 良辰：'..t))
    local size = ss:calculateSize(100)
    print(size)
    textlable:width(size:width())
    textlable:height(size:height())
    textlable:styleText(ss)
end)
--edit:setDidChangingCallback(function (s, start, count)
--    print(' ', s, start, count)
--end)
baseView:addView(edit)

local iv = ImageView()
iv:width(50)
iv:height(50)
iv:x(50)
iv:cornerRadius(8)
iv:image('http://pic24.photophoto.cn/20120730/0036036815619480_b.jpg')
iv:startAnimationImages({'http://pic24.photophoto.cn/20120730/0036036815619480_b.jpg', 'http://hbimg.b0.upaiyun.com/087a7d5929ea6e2ce672d8cdf46ad1df19b069e352532-iq1dEg_fw658', 'http://img5.imgtn.bdimg.com/it/u=3604858831,3357525860&fm=27&gp=0.jpg'}, 1, true)
baseView:addView(iv)

local ib = ImageButton()
ib:width(100)
ib:height(100)
--ib:y(100)
ib:contentMode(ContentMode.SCALE_ASPECT_FILL)
ib:cornerRadius(8)
ib:setImage( 'http://hbimg.b0.upaiyun.com/087a7d5929ea6e2ce672d8cdf46ad1df19b069e352532-iq1dEg_fw658', 'http://img5.imgtn.bdimg.com/it/u=3604858831,3357525860&fm=27&gp=0.jpg')
ib:bgColor(Color(255, 0, 0, 1))
ib:onClick(function ()

end)
--window:addView(ib)

local scrollview = ScrollView(true)
scrollview:width(200)
scrollview:height(200)
scrollview:y(100)
scrollview:addView(ib)
scrollview:contentSize(Size(300, 400))
scrollview:setScrollBeginCallback(function()
    print('begin scroll')
end)
scrollview:setScrollingCallback(function(x, y)
    print('scrolling', x, y)
end)
scrollview:setScrollEndCallback(function()
    print('end scroll')
end)
scrollview:setEndDraggingCallback(function (x, y)
    print('end dragging', x, y)
end)
scrollview:setStartDeceleratingCallback(function (x, y)
    print('dece', x, y)
end)
scrollview:scrollEnabled(false)
System:setTimeOut(function()
    scrollview:contentOffset(Point(100, 0))
end, 1)

local iv1 = ImageView()
iv1:width(50)
iv1:height(100)
iv1:x(100)
iv1:image('http://pic24.photophoto.cn/20120730/0036036815619480_b.jpg')
local iv2 = ImageView()
iv2:width(50)
iv2:height(100)
iv2:x(200)
iv2:image('http://pic24.photophoto.cn/20120730/0036036815619480_b.jpg')
local iv3 = ImageView()
iv3:width(50)
iv3:height(100)
iv3:x(300)
iv3:image('http://pic24.photophoto.cn/20120730/0036036815619480_b.jpg')
--local now = System:nanoTime()
iv1:cornerRadius(8)
iv2:cornerRadius(8)
iv3:cornerRadius(8)
--local e = System:nanoTime()
--print('UDView in lua set corner cast', (e - now))
scrollview:addView(iv1)
scrollview:addView(iv2)
scrollview:addView(iv3)

window:addView(scrollview)

local label = Label()
label:width(100)
label:height(50)
label:fontSize(16)
label:y(300)
label:textAlign(TextAlign.CENTER)
label:text("full")
label:addCornerMask(10, Color(255,255,255))
label:onClick(function ()
    --Alert():title("title"):message("msg"):setOk("", function ()
    --    print("ok")
    --end):setCancel("", function ()
    --    print("cancel")
    --end):show()
    print(screen_h)
    System:switchFullscreen(true)
    print(window:height())
end)
label:bgColor(Color(125,125,125,1))
print('bg: ',label:bgColor())
window:addView(label)

local label1 = Label()
label1:width(100)
label1:height(50)
label1:fontSize(16)
label1:y(360)
label1:textAlign(TextAlign.CENTER)
label1:text("list")
label1:onClick(function ()
    Alert():title("list title"):message("list msg"):setButtonList(Array():add("a1"):add("a2"):add("a3"),
    function (n)
        print("click", n)
    end):show()
end)
label1:bgColor(Color(125,125,125,1))
window:addView(label1)

local b1 = Label()
b1:width(100)
b1:height(50)
b1:fontSize(16)
b1:y(420)
b1:textAlign(TextAlign.CENTER)
b1:styleText(StyleString("style"):append(StyleString("ic_launcher"):showAsImage(Size(16, 16)):append(StyleString(" call nil"))))
print(b1:styleText())
--b1:text("single")
b1:bgColor(Color(125,125,125,1))
b1:onClick(function ()
    local nilvalue
    nilvalue:y()
    Toast("after nil call", 1000)
end)
window:addView(b1)
--TimeManager:setTimeOut(function ()
--    scrollview:contentOffset(Point(0, 100))
--end, 1000)
local label3 = Label()
label3:width(100)
label3:height(50)
label3:fontSize(16)
label3:y(480)
label3:textAlign(TextAlign.CENTER)
label3:text("anim")
label3:openRipple(true)
label3:bgColor(Color():hex(0xffff00):alpha(1))
label3:onClick(function ()
    Animation()
            --:setTranslateX(0, 100)
            --:setTranslateY(0, 100)
            --:setRotate(0, 180)
            :setScaleX(1, 1.5)
            --:setScaleY(1, 1.5)
            :setAlpha(1, 0)
            :setDuration(1)
            :setDelay(0.5)
            :setAutoBack(true)
            :setInterpolator(InterpolatorType.Linear)
            :start(label3)
end)
window:addView(label3)

local useColor = true
local label4 = Label()
label4:width(100)
label4:height(50)
label4:fontSize(16)
label4:y(540)
label4:textAlign(TextAlign.CENTER)
label4:text("test label text cast")
label4:cornerRadius(10)
label4:setGradientColor(Color(255,0,0,1), Color(0,0,255,1), true)
--label4:bgColor(Color():hex(0xffff00):alpha(1))
label4:onClick(function ()
    --if useColor then
    --    useColor = false
    --    label4:bgColor(Color():hex(0xffff00):alpha(1))
    --else
    --    useColor = true
    --    label4:setGradientColor(Color(255,0,0,1), Color(0,0,255,1), true)
    --end
    print('start')
    local now = System:nanoTime()
    for i = 1, 10 do
        label4:text('adfjasdf')
    end
    label4:text("test label text cast")
    print('cast: ', (System:nanoTime() - now))
end)
window:addView(label4)

local arr1 = Array()
arr1:add(1):add('a'):add(label1):add(2):add('b'):add(label3)
local arr2 = Array():add(1):add('a'):add(label1)

local label5 = Label()
label5:width(100)
label5:height(100)
local s5 = StyleString("ﻬ")
--label5:size(s5:calculateSize(100))
s5:fontStyle(FontStyle.BOLD)
s5:fontColor(Color(255,0,0,1))
label5:lines(1)
--label5:setAutoFit(true)
label5:fontNameSize('test',16)
label5:y(600)
label5:x(1)
--label5:right(1)
label5:textAlign(TextAlign.LEFT)
--label5:styleText(s5)
label5:text("测试Array")
label5:bgColor(Color():hex(0xffe00e):alpha(0.5))
label5:onClick(function ()
    local now = System:nanoTime()
    local size1 = arr1:size()
    local cast = System:nanoTime() - now;
    print('arr1: ',  size1);
    print('arr2: ',  arr2:size());
    -- arr1:removeObjects(arr2);
    arr1:removeObject(label1);
    arr1:removeObject('b');
    print('after remove, cast: ',  arr1:size());
end)
print('y', label5:x())
label5:centerX(100)
print('y: ', label5:x())
--label5:centerY(100)
window:addView(label5)
--label5:right(0)
--label5:x(0)

local frameView = View():bgColor(Color(255,0,0,0.2))
frameView:setWrapContent(true):marginLeft(20):marginRight(20):setGravity(Gravity.CENTER)
local fc1 = View():bgColor(Color(0,255,0,0.2))
fc1:setWrapContent(true):marginLeft(20):marginRight(20)
local fc2 = Label():bgColor(Color(0,0,255,0.2))
fc2:setWrapContent(true):marginLeft(20):marginRight(20)
--fc2:text('adfjk')
fc1:addView(fc2)
frameView:addView(fc1)

window:addView(frameView)